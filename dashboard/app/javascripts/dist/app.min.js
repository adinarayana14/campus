"use strict";var app=angular.module("AmanSetuApp",["ui.router","ui.bootstrap","ngAnimate","ngCookies","base64","oc.lazyLoad"]);app.config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("home",{url:"/home",templateUrl:"dashboard/home"}).state("timeout",{url:"/session-time-out",templateUrl:"login/session_time_out"}).state("quotations",{url:"/quotations",templateUrl:"dashboard/quotation-list",controller:"QuotationController"}).state("quotation",{url:"/quotation/{quotId:[0-9]{1,4}}",templateUrl:function(a){return"dashboard/quotation-details/"+a.quotId},controller:"QuotationDetailsController"}).state("events",{url:"/events",templateUrl:"dashboard/event-list",controller:"EventsController"}).state("eventdetails",{url:"/eventdetails/{evtId:[0-9]{1,4}}",templateUrl:function(a){return"dashboard/event-details/"+a.evtId},controller:"EventDetailsController"}).state("circulars",{url:"/circulars",templateUrl:"dashboard/circulars-list",controller:"CircularsController"}).state("addcircular",{url:"/circular-details/{cirId:[0-9]{1,4}}",templateUrl:function(a){return"dashboard/circular-details/"+a.cirId},controller:"AddCircularController",resolve:{loadcroppie:["$ocLazyLoad",function(a){return a.load(["assets/dashboard/theme/js/datepicker/bootstrap-datepicker.js","assets/dashboard/theme/js/input-mask/jquery.inputmask.js","assets/dashboard/theme/js/input-mask/jquery.inputmask.date.extensions.js","assets/dashboard/theme/js/input-mask/jquery.inputmask.extensions.js","assets/dashboard/theme/js/datepicker/datepicker3.css"])}]}}).state("newsletter",{url:"/newsletter",templateUrl:"dashboard/newsletter-list",controller:"NewsletterController"}).state("addnewsletter",{url:"/add-newsletter",templateUrl:"dashboard/add-newsletter",controller:"AddNewsletterController",resolve:{loadcroppie:["$ocLazyLoad",function(a){return a.load(["assets/dashboard/theme/js/select2/select2.full.min.js"])}]}}).state("announcements",{url:"/announcements",templateUrl:"dashboard/announcement-list",controller:"AnnouncementsController"}).state("announcement",{url:"/announcement/{id:[0-9]{1,4}}",templateUrl:function(a){return"dashboard/announcement-details/"+a.id},controller:"AnnouncementDetailsController"}).state("updgallery",{url:"/updates-gallery",templateUrl:"dashboard/updates-gallery-list",controller:"UpdatesGalleryController",resolve:{loadcroppie:["$ocLazyLoad",function(a){return a.load(["assets/dashboard/theme/js/jquery.magnific-popup.js","assets/dashboard/theme/css/magnific-popup.css","assets/dashboard/theme/js/croppie.min.js","assets/dashboard/theme/js/exif.js","assets/dashboard/theme/css/croppie.css"])}]}}).state("addupdgallery",{url:"/add-image-for-updates",templateUrl:"dashboard/add-updates-gallery",controller:"AddUpdatesGalleryController",resolve:{loadcroppie:["$ocLazyLoad",function(a){return a.load(["assets/dashboard/theme/js/croppie.min.js","assets/dashboard/theme/js/exif.js","assets/dashboard/theme/css/croppie.css"])}]}}).state("slideshow",{url:"/slideshow",templateUrl:"dashboard/slideshow-list",controller:"SlideShowController",resolve:{loadcroppie:["$ocLazyLoad",function(a){return a.load(["assets/dashboard/theme/js/jquery.magnific-popup.js","assets/dashboard/theme/css/magnific-popup.css"])}]}}).state("slideshowlist",{url:"/slideshow-details/{title:[0-9]{1,4}}",templateUrl:function(a){return"dashboard/slideshow-details/"+a.title},controller:"SlideShowDetailsController",resolve:{loadcroppie:["$ocLazyLoad",function(a){return a.load(["assets/dashboard/theme/js/jquery.magnific-popup.js","assets/dashboard/theme/css/magnific-popup.css","assets/dashboard/theme/js/croppie.min.js","assets/dashboard/theme/js/exif.js","assets/dashboard/theme/js/select2/select2.full.min.js","assets/dashboard/theme/css/croppie.css"])}]}}).state("gallery",{url:"/gallery",templateUrl:"dashboard/gallery-list",controller:"GalleryController",resolve:{loadcroppie:["$ocLazyLoad",function(a){return a.load(["assets/dashboard/theme/js/jquery.magnific-popup.js","assets/dashboard/theme/css/magnific-popup.css"])}]}}).state("gallerydetails",{url:"/gallerydetailst/{galid:[0-9]{1,4}}",templateUrl:function(a){return"dashboard/gallery-details/"+a.galid},controller:"GalleryDetailsController",resolve:{loadcroppie:["$ocLazyLoad",function(a){return a.load(["assets/dashboard/theme/js/croppie.min.js","assets/dashboard/theme/js/jquery.magnific-popup.js","assets/dashboard/theme/css/magnific-popup.css","assets/dashboard/theme/js/exif.js","assets/dashboard/theme/js/select2/select2.full.min.js","assets/dashboard/theme/css/croppie.css","assets/dashboard/theme/js/datepicker/bootstrap-datepicker.js","assets/dashboard/theme/js/datepicker/datepicker3.css"])}]}}),b.otherwise("home")}]).run(function(a,b,c,d,e){b.$state=a,b.$on("$stateChangeSuccess",function(){document.body.scrollTop=document.documentElement.scrollTop=0}),b.$on("$viewContentLoaded",function(){e.removeAll()})}),app.factory("PageSettings",function(){var a="TeMeDa",b="primary";return{title:function(){return a},pageClass:function(){return b},setTitle:function(b){a=b},setPageClass:function(a){b=a}}}),app.controller("PrimaryController",["$rootScope","$scope","$state","$interval","$timeout","$location","$cookies","PageSettings",function(a,b,c,d,e,f,g,h){b.loremIpsum="We apologize, but the functionality for this part of the app is currently in development. We thank you for you consideration and understanding as we work to bring you these features.",b.PageSettings=h,h.setTitle("AMAN SETU"),h.setPageClass("primary"),a.viewContentLoading=!1,a.$on("$stateChangeStart",function(b){a.viewContentLoading=!0}),a.$on("$stateChangeSuccess",function(b){e(function(){a.viewContentLoading=!1},300)}),a.$on("$stateChangeError",function(b,c,d,e){a.viewContentLoading=!1}),b.confirmYesNo=function(a,b,c,d,e){console.info(e),bootbox.dialog({message:b,title:a,size:void 0!==e||null===e?e:null,buttons:{yes:{label:"Yes",className:"btn-success",callback:function(){c()}},no:{label:"No",className:"btn-danger",callback:function(){d&&d()}}}})},b.confirmBox=function(a,b,c){bootbox.confirm({size:void 0!==c||null===c?c:null,message:a,callback:function(a){b&&b(a)}})},b.alertBox=function(a,b,c){bootbox.alert({size:void 0!==c||null===c?c:null,message:a,callback:function(){b&&b()}})}}]),app.controller("QuotationController",["$rootScope","$scope","$state","$stateParams","$interval","$timeout","$location","$cookies","PageSettings",function(a,b,c,d,e,f,g,h,i){console.info("eeeeeeeeeee"),$(function(){var c=$("#example").DataTable({ajax:"dashboard/get_quotations_json",columns:[{data:"description"},{data:"author"},{data:"id",render:function(a,b,c,d){return'<a href="#/quotation/'+a+'">Edit</a>&nbsp;&nbsp; <a class="qdelete" href="'+a+'">Delete</a>'},orderable:!1}]});$("#example tbody").on("click",".qdelete",function(d){d.preventDefault(),a.viewContentLoading=!0;var e=jQuery(this).attr("href");b.confirmBox("Are you sure want to delete?",function(a){a&&jQuery.ajax({url:"dashboard/deleteQuotation/"+e,type:"POST",success:function(a){console.info("deleted successfulluy"),c.ajax.reload()},error:function(a,b){},async:!1})},"small"),a.viewContentLoading=!1})}),b.testconfirm=function(){b.confirmYesNo("hey","Are you sure?",b.successfun)},b.successfun=function(){console.info("u done------")},b.failfun=function(){console.info("u not done------")}}]),app.controller("QuotationDetailsController",["$rootScope","$scope","$state","$stateParams","$interval","$timeout","$location","$cookies","PageSettings",function(a,b,c,d,e,f,g,h,i){console.info(d.quotId),b.quotId=d.quotId,b.saveQuotation=function(){return""===jQuery.trim($("#description").val())?(b.alertBox("Please Enter Quotation Text"),!1):(a.viewContentLoading=!0,jQuery.ajax({url:"dashboard/saveQuotation",type:"POST",data:jQuery("#quotationform").serialize(),success:function(a){},error:function(a,b){},async:!1,cache:!1}),c.go("quotations"),!1)}}]),app.controller("CircularsController",["$rootScope","$scope","$state","$stateParams","$interval","$timeout","$location","$cookies","PageSettings","CircularService",function(a,b,c,d,e,f,g,h,i,j){$(function(){var d=$("#circluarlist").DataTable({ajax:"dashboard/get_circulars_list",columns:[{data:"event_name"},{data:"from_date"},{data:"to_date"},{data:"time"},{data:"post",render:function(a,b,c,d){return 1===parseInt(a)?'<small class="label bg-green">Posted</small>':'<small class="label bg-red">Pending</small>'}},{data:"id",render:function(a,b,c,d){return'<a class="qedit" href="'+a+'">Edit</a>&nbsp;&nbsp; <a class="qdelete" href="'+a+'">Delete</a>'},orderable:!1}],order:[[1,"desc"]]});$("#circluarlist tbody").on("click",".qdelete",function(c){c.preventDefault(),a.viewContentLoading=!0;var e=jQuery(this).attr("href");b.confirmBox("Are you sure want to delete?",function(a){a&&jQuery.ajax({url:"dashboard/delete_circular/"+e,type:"POST",success:function(a){console.info("deleted successfulluy"),d.ajax.reload()},error:function(a,b){},async:!1})},"small"),a.viewContentLoading=!1}),$("#circluarlist tbody").on("click",".qedit",function(b){b.preventDefault(),a.viewContentLoading=!0;var d=jQuery(this).attr("href");c.go("addcircular",{cirId:d})})})}]),app.controller("AddCircularController",["$rootScope","$scope","$state","$stateParams","$interval","$timeout","$location","$cookies","PageSettings",function(a,b,c,d,e,f,g,h,i){b.cirId=d.cirId,console.info(d.cirId),b.addCirculars=function(){a.viewContentLoading=!0},$(".input-daterange").datepicker({format:"dd MM yyyy",autoclose:!0}),$("#time").inputmask({mask:"h:s t\\m - h:s t\\m",placeholder:"hh:mm xm - hh:mm xm",alias:"datetime",hourFormat:"12"}),jQuery("#circularsform").ajaxForm({url:"dashboard/saveCirculars",type:"POST",beforeSubmit:function(c,d,e){var f=d[0];return""===jQuery.trim(f.event.value)?(b.alertBox("Please Enter Event Name"),!1):""===jQuery.trim(f.fromdate.value)?(b.alertBox("Please Enter Date"),!1):""===jQuery.trim(f.description.value)?(b.alertBox("Please Enter Description"),!1):void(a.viewContentLoading=!0)},success:function(b){a.viewContentLoading=!1,console.info("succes----"),c.go("circulars")},error:function(b,d){a.viewContentLoading=!1,c.go("circulars")},cache:!1}),b.submitforweb=function(){b.confirmBox("Are you sure want to submit this circular for Web?",function(d){d&&($("#post").val("1"),a.viewContentLoading=!0,jQuery.ajax({url:"dashboard/saveCirculars",data:jQuery("#circularsform").serialize(),type:"POST",success:function(a){b.alertBox("This circular is posted on Web successfully!",function(){c.go("circulars")})},error:function(){b.alertBox("This circular is not posted on Web successfully!",function(){c.go("circulars")})},cache:!1}))})}}]),app.factory("CircularService",["$http",function(a){return{getCircularListData:function(){var b=a.get("get_circulars_list").then(function(a){return a.data});return b}}}]),app.controller("NewsletterController",["$rootScope","$scope","$state","$stateParams","$interval","$timeout","$location","$cookies","PageSettings",function(a,b,c,d,e,f,g,h,i){$(function(){var a=$("#newsletterlist").DataTable({ajax:"dashboard/get_newsletter_list",columns:[{data:"period"},{data:"file_name",render:function(a,b,c,d){return'<a target = "_blank" href="'+c.file_path+"/"+a+'">'+a+"</a>"}},{data:"created_date"},{data:"id",render:function(a,b,c,d){return'<a class="qdelete" href="'+a+'">Delete</a>'}}],order:[[0,"desc"]]});$("#newsletterlist tbody").on("click",".qdelete",function(c){c.preventDefault(),$(".spin-loader").removeClass("ng-hide");var d=jQuery(this).attr("href");b.confirmBox("Are you sure want to delete?",function(b){b&&jQuery.ajax({url:"dashboard/delete_newsletter/"+d,type:"POST",success:function(b){console.info("deleted successfulluy"),a.ajax.reload()},error:function(a,b){},complete:function(){$(".spin-loader").addClass("ng-hide")},async:!1})},"small")})})}]),app.controller("AddNewsletterController",["$rootScope","$scope","$state","$stateParams","$interval","$timeout","$location","$cookies","PageSettings",function(a,b,c,d,e,f,g,h,i){$(":file").filestyle({buttonBefore:!0,buttonName:"btn-primary"}),$("#period").select2({}),jQuery("#newsletterform").ajaxForm({url:"dashboard/save_newsletter",type:"POST",beforeSubmit:function(a,c,d){var e=c[0];return""===jQuery.trim(e.period.value)?(b.alertBox("Please Enter Period"),!1):""===jQuery.trim(e.uploadfile.value)?(b.alertBox("Please Choose file to upload"),!1):void $(".spin-loader").removeClass("ng-hide")},success:function(a){"error"===a.status?b.alertBox(a.message):c.go("newsletter")},error:function(a,b){c.go("newsletter")},complete:function(){$(".spin-loader").addClass("ng-hide")},dataType:"json",cache:!1})}]),app.controller("UpdatesGalleryController",["$rootScope","$scope","$state","$stateParams","$interval","$timeout","$location","$cookies","PageSettings","UpdatesGallery",function(a,b,c,d,e,f,g,h,i,j){$(":file").filestyle({buttonBefore:!0,buttonName:"btn-primary"});var k;b.readFile=function(a){if(a.files&&a.files[0]){var c=new FileReader;c.onload=function(a){k.croppie("bind",{url:a.target.result})},c.readAsDataURL(a.files[0])}else b.alertBox("Sorry - you're browser doesn't support the FileReader API")},k=$("#upload-demo").croppie({enableExif:!0,viewport:{width:301,height:169},boundary:{width:340,height:210}}),$("#uploadfile").on("change",function(){b.readFile(this)}),b.saveUpdatesGaleery=function(){$(".spin-loader").removeClass("ng-hide"),k.croppie("result",{type:"canvas",size:{width:960,height:540}}).then(function(a){jQuery("#imgtext").val(a)}),f(function(){jQuery.ajax({url:"dashboard/save-updates-gallery",type:"POST",data:jQuery("#updatesGaleeryform").serialize(),success:function(a){},error:function(a,b){},complete:function(){},async:!1,cache:!1}),$("#description").val(""),j.getUpdatesGalleryListData().then(function(a){b.gallaryList=a}),k.croppie("destroy"),k=$("#upload-demo").croppie({enableExif:!0,viewport:{width:301,height:169},boundary:{width:340,height:210}}),$(".spin-loader").addClass("ng-hide")},1e3)},j.getUpdatesGalleryListData().then(function(a){b.gallaryList=a}),b.$watch("gallaryList",function(a,c){f(function(){$("#gallery-list").magnificPopup({delegate:"a.img-link",type:"image",gallery:{enabled:!0}}),$(".imageremove").click(function(a){a.preventDefault(),$(".spin-loader").removeClass("ng-hide");var c=jQuery(this).attr("href");b.confirmBox("Are you sure want to delete?",function(a){a?jQuery.ajax({url:"dashboard/delete-image-upd/"+c,type:"POST",success:function(a){j.getUpdatesGalleryListData().then(function(a){b.gallaryList=a})},error:function(a,b){},complete:function(){$(".spin-loader").addClass("ng-hide")},async:!1,cache:!1}):$(".spin-loader").addClass("ng-hide")},"small")})})})}]),app.controller("AddUpdatesGalleryController",["$rootScope","$scope","$state","$stateParams","$interval","$timeout","$location","$cookies","PageSettings",function(a,b,c,d,e,f,g,h,i){$(":file").filestyle({buttonBefore:!0,buttonName:"btn-primary"});var j;b.readFile=function(a){if(a.files&&a.files[0]){var c=new FileReader;c.onload=function(a){j.croppie("bind",{url:a.target.result})},c.readAsDataURL(a.files[0])}else b.alertBox("Sorry - you're browser doesn't support the FileReader API")},j=$("#upload-demo").croppie({enableExif:!0,viewport:{width:345,height:194},boundary:{width:395,height:260}}),$("#uploadfile").on("change",function(){b.readFile(this)}),b.saveUpdatesGaleery=function(){a.viewContentLoading=!0,j.croppie("result",{type:"canvas",size:{width:960,height:540}}).then(function(a){jQuery("#imgtext").val(a)}),f(function(){jQuery.ajax({url:"dashboard/save-updates-gallery",type:"POST",data:jQuery("#updatesGaleeryform").serialize(),success:function(a){},error:function(a,b){},async:!1,cache:!1}),c.go("updgallery")},1e3)}}]),app.factory("UpdatesGallery",["$http",function(a){return{getUpdatesGalleryListData:function(){var b=a.get("dashboard/get-updates-gallery-list").then(function(a){return a.data});return b},getSildeShowListData:function(){var b=a.get("dashboard/slideshow-list-json").then(function(a){return a.data});return b},getSildeShowListDetails:function(b){var c=a.get("dashboard/slideshow-image-list/"+b).then(function(a){return a.data});return c},getGalleryListJson:function(b){var c=a.get("dashboard/gallery-image-list/"+b).then(function(a){return a.data});return c},getGalleryListCountJson:function(){var b=a.get("dashboard/gallery-list-json").then(function(a){return a.data});return b}}}]),app.controller("SlideShowController",["$rootScope","$scope","$state","$stateParams","$interval","$timeout","$location","$cookies","PageSettings","UpdatesGallery",function(a,b,c,d,e,f,g,h,i,j){j.getSildeShowListData().then(function(a){console.info(a),b.slideslist=a})}]),app.controller("SlideShowDetailsController",["$rootScope","$scope","$state","$stateParams","$interval","$timeout","$location","$cookies","PageSettings","UpdatesGallery",function(a,b,c,d,e,f,g,h,i,j){var k;$("#titleaa").select2({}),b.title=d.title,j.getSildeShowListDetails(b.title).then(function(a){b.gallaryList=a}),b.$watch("gallaryList",function(a,c){f(function(){$("#gallery-list").each(function(){$(this).magnificPopup({delegate:"a.img-link",type:"image",gallery:{enabled:!0}})}),$(".imageremove").click(function(a){a.preventDefault(),$(".spin-loader").removeClass("ng-hide");var c=jQuery(this).attr("href");b.confirmBox("Are you sure want to delete?",function(a){a?jQuery.ajax({url:"dashboard/delete-image/"+c,type:"POST",success:function(a){j.getSildeShowListDetails(b.title).then(function(a){b.gallaryList=a})},error:function(a,b){},complete:function(){$(".spin-loader").addClass("ng-hide")},async:!1,cache:!1}):$(".spin-loader").addClass("ng-hide")},"small")})})});var l=!1;b.readFile=function(a){if(a.files&&a.files[0]){var c=new FileReader;c.onload=function(a){k.croppie("bind",{url:a.target.result}),l=!0},c.readAsDataURL(a.files[0])}else b.alertBox("Sorry - you're browser doesn't support the FileReader API")},k=$("#upload-demo").croppie({enableExif:!0,viewport:{width:345,height:194},boundary:{width:395,height:260}}),$("#uploadfile").on("change",function(){b.readFile(this)}),b.cropImage=function(){return l?(console.info(k.croppie("get")),void k.croppie("result",{type:"canvas",size:{width:960,height:540}}).then(function(a){$("#croploader").css("display","block"),$("#imagebase64").val(a);var b="";jQuery.ajax({url:"dashboard/uploadfiletemp",type:"POST",data:jQuery("#uploadimagetempform").serialize(),success:function(a){b=a.file_name},error:function(a,b){},dataType:"json",async:!1,cache:!1});var c="<img src='"+a+"' data-path='"+b+"' style='padding:0 3px 0 3px; height: 30px; width: auto'/>";jQuery("#imgpreview").append(c),l=!1,k.croppie("destroy"),k=$("#upload-demo").croppie({enableExif:!0,viewport:{width:345,height:194},boundary:{width:395,height:260}}),$("#croploader").css("display","none")})):void b.alertBox("Please select image to crop")},b.finishCrop=function(){jQuery("#imageinputinfo").empty(),jQuery("#imgpreview img").each(function(a){$("#imagethumbcontent").find("img").attr({src:$(this).attr("src"),"data-path":$(this).attr("data-path")}),$("#selectedimages").append($("#imagethumbcontent").html())}),$("#selectedimages .img-container").click(function(){var a=this;b.confirmBox("Are you sure want to delete this image?",function(b){if(b){jQuery.ajax({url:"dashboard/removetempimage",type:"POST",data:{fname:$(a).find("img").attr("data-path")},success:function(a){},error:function(a,b){},dataType:"json",async:!1,cache:!1});var c=$(a).find("img").attr("data-index");console.info(c),$(a).remove(),$("#slideimg"+c).remove(),$("#slidedesc"+c).remove()}})}),$("#selectedimages img").each(function(a){$(this).attr({"data-index":a}),$("<input>").attr({type:"hidden",id:"slideimg"+a,name:"slideimg"+a,value:$(this).attr("data-path")}).appendTo(jQuery("#imageinputinfo")),$("#imagecount").val(a+1)}),jQuery("#imgpreview").empty()},b.clearForm=function(){$("#selectedimages").empty(),jQuery("#imgpreview").empty(),jQuery("#imageinputinfo").empty(),$("#galeeryform")[0].reset()},jQuery("#slideGaleeryform").ajaxForm({url:"dashboard/save-slide-show",type:"POST",beforeSubmit:function(c,d,e){var f=d[0];return""===jQuery.trim(f.description.value)?(b.alertBox("Please Enter Description"),!1):void(a.viewContentLoading=!0)},success:function(b){a.viewContentLoading=!1,c.go("slideshow")},error:function(b,d){a.viewContentLoading=!1,c.go("slideshow")},cache:!1}),b.removeImage=function(a){}}]),app.controller("GalleryController",["$rootScope","$scope","$state","$stateParams","$interval","$timeout","$location","$cookies","PageSettings","UpdatesGallery",function(a,b,c,d,e,f,g,h,i,j){j.getGalleryListCountJson().then(function(a){console.info(a),b.slideslist=a})}]),app.controller("GalleryDetailsController",["$rootScope","$scope","$state","$stateParams","$interval","$timeout","$location","$cookies","PageSettings","UpdatesGallery",function(a,b,c,d,e,f,g,h,i,j){var k;$("#eventdate").datepicker({format:"dd MM yyyy",autoclose:!0}),b.galid=d.galid,j.getGalleryListJson(b.galid).then(function(a){b.gallaryList=a}),b.$watch("gallaryList",function(a,c){f(function(){$("#gallery-list").each(function(){$(this).magnificPopup({delegate:"a.img-link",type:"image",gallery:{enabled:!0}})}),$(".imageremove").click(function(a){a.preventDefault(),$(".spin-loader").removeClass("ng-hide");var c=jQuery(this).attr("href");b.confirmBox("Are you sure want to delete?",function(a){a?jQuery.ajax({url:"dashboard/delete-image/"+c,type:"POST",success:function(a){j.getGalleryListJson(b.galid).then(function(a){b.gallaryList=a})},error:function(a,b){},complete:function(){$(".spin-loader").addClass("ng-hide")},async:!1,cache:!1}):$(".spin-loader").addClass("ng-hide")},"small")})})});var l=!1;b.readFile=function(a){if(a.files&&a.files[0]){var c=new FileReader;c.onload=function(a){k.croppie("bind",{url:a.target.result}),l=!0},c.readAsDataURL(a.files[0])}else b.alertBox("Sorry - you're browser doesn't support the FileReader API")},k=$("#upload-demo").croppie({enableExif:!0,viewport:{width:345,height:194},boundary:{width:395,height:260}}),$("#uploadfile").on("change",function(){b.readFile(this)}),b.cropImage=function(){return l?void k.croppie("result",{type:"canvas",size:{width:960,height:540}}).then(function(a){$("#croploader").css("display","block"),$("#imagebase64").val(a);var b=$("#imgdescription").val(),c="";jQuery.ajax({url:"dashboard/uploadfiletemp",type:"POST",data:jQuery("#uploadimagetempform").serialize(),success:function(a){c=a.file_name},error:function(a,b){},dataType:"json",async:!1,cache:!1});var d='<img src="'+a+'" data-path="'+c+'" data-desc="'+b+'" height="30" width="auto" style="padding:0 3px 0 3px"/>';jQuery("#imgpreview").append(d),$("#imgdescription").val(""),l=!1,k.croppie("destroy"),k=$("#upload-demo").croppie({enableExif:!0,viewport:{width:345,height:194},boundary:{width:395,height:260}}),$("#croploader").css("display","none")}):void b.alertBox("Please select image to crop")},b.finishCrop=function(){jQuery("#imageinputinfo").empty(),jQuery("#imgpreview img").each(function(a){$("#imagethumbcontent").find("img").attr({src:$(this).attr("src"),"data-path":$(this).attr("data-path"),"data-desc":$(this).attr("data-desc")}),$("#selectedimages").append($("#imagethumbcontent").html())}),$("#selectedimages .img-container").click(function(){var a=this;b.confirmBox("Are you sure want to delete this image?",function(b){if(b){jQuery.ajax({url:"dashboard/removetempimage",type:"POST",data:{fname:$(a).find("img").attr("data-path")},success:function(a){},error:function(a,b){},dataType:"json",async:!1,cache:!1});var c=$(a).find("img").attr("data-index");$(a).remove(),$("#slideimg"+c).remove(),$("#slidedesc"+c).remove()}})}),$("#selectedimages img").each(function(a){$(this).attr({"data-index":a}),$("<input>").attr({type:"hidden",id:"slideimg"+a,name:"slideimg"+a,value:$(this).attr("data-path")}).appendTo(jQuery("#imageinputinfo")),$("<input>").attr({type:"hidden",id:"slidedesc"+a,name:"slidedesc"+a,value:$(this).attr("data-desc")}).appendTo(jQuery("#imageinputinfo")),$("#imagecount").val(a+1)}),jQuery("#imgpreview").empty()},b.clearForm=function(){$("#selectedimages").empty(),jQuery("#imgpreview").empty(),jQuery("#imageinputinfo").empty(),$("#galeeryform")[0].reset()},b.submitGallery=function(){if(""===jQuery.trim($("#event").val()))return b.alertBox("Please Enter Event Name"),!1;if(""===jQuery.trim($("#eventdate").val()))return b.alertBox("Please Enter Event Date"),!1;var c=!1;return a.viewContentLoading=!0,jQuery.ajax({url:"dashboard/is-gallery-exist",type:"POST",data:{event:jQuery.trim($("#event").val())},success:function(a){"yes"===a.status&&$("#galid").val()!==a.galid&&(c=!0,$("#galid").val(a.galid))},error:function(){c=!1},dataType:"json",async:!1,cache:!1}),c?(b.confirmBox("This event name is alert exist so this will be override!<br/>Do you want to continue?",function(a){a&&b.savegallery(c)}),!1):(b.savegallery(c),!1)},b.savegallery=function(a){jQuery.ajax({url:"dashboard/save-gallery",type:"POST",data:jQuery("#galleryform").serialize(),success:function(a){c.go("gallery")},error:function(a,b){c.go("gallery")},async:!1,cache:!1})}}]);